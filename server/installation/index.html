<!DOCTYPE html>
<html class="no-js">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Installation  &middot; Yarra Framework</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">

<meta property="og:title" content="Installation  &middot; Yarra Framework ">
<meta property="og:site_name" content="Yarra Framework"/>
<meta property="og:url" content="http://yarra-framework.org/server/installation/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2018-06-15T00:00:00Z" />
<meta property="og:article:modified_time" content="2018-06-15T00:00:00Z" />

  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Installation",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2018-06-15",
    "description": "",
    "wordCount":  1364 
  }
</script>


<link rel="canonical" href="http://yarra-framework.org/server/installation/" />

<meta name="generator" content="Hugo 0.104.3" />


  <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/yarra.css">

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63470225-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-63470225-3');
  </script>

</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top site-navbar navbar-inverse">
  <a class="navbar-brand text-white" href="http://yarra-framework.org/">Yarra Framework</a>
  <button class="navbar-toggler text-white" 
  type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2" aria-controls="exCollapsingNavbar2"
    aria-expanded="false" aria-label="Toggle navigation">
    &#9776;
  </button>
  <div class="collapse navbar-collapse" id="exCollapsingNavbar2">
    <ul class="nav navbar-nav ml-1 mr-auto">
               
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/overview/">
            
            <span class="text-capitalize no-decoration text-white">Overview</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/clients/">
            
            <span class="text-capitalize no-decoration text-white">Clients</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item active" href="/server/">
            
            <span class="text-capitalize no-decoration text-white">Server</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/modules/">
            
            <span class="text-capitalize no-decoration text-white">Modules</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/logserver/">
            
            <span class="text-capitalize no-decoration text-white">LogServer</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/addons/">
            
            <span class="text-capitalize no-decoration text-white">Addons</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/download/">
            
            <span class="text-capitalize no-decoration text-white">Download</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/blog/">
            
            <span class="text-capitalize no-decoration text-white">Blog</span>
          </a>
        </li>
        
              
        
              
        
              
        
      
    </ul>
  </div>
</nav>


<div class="container p-a-0">
  <div class="row m-l-0 m-r-0 mb-2">
    <div class="col">
      <h1>Server&nbsp;-&nbsp;Installation</h1>
    </div>
  </div>
    <div class="row m-l-0 m-r-0">
      <div class="col-xs-12 col-lg-3">
      <div class="list-group mr-3 mb-4">
        <a href="http://yarra-framework.org/server/" class="list-group-item list-group-item-action">Overview</a>
        
        
        
        <a href="/server/installation/" class="list-group-item list-group-item-action active">&ndash;&nbsp; Installation</a>
        
        <a href="/server/configuration/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Configuration</a>
        
        <a href="/server/webgui/" class="list-group-item list-group-item-action ">&ndash;&nbsp; WebGUI</a>
        
        <a href="/server/usage/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Manual Control</a>
        
        <a href="/server/modes/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Reconstruction Modes</a>
        
        <a href="/server/notifications/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Notifications</a>
        
        <a href="/server/loadbalancing/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Load Balancing</a>
        
      </div>
    </div>
    <div class="col-xs-12 col-lg-9 post-container">
      <div class="content pt-2">
  <h3 id="hahahugoshortcode-s0-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Operating System

</h3>
<p>The currently supported operating systems for YarraServer are <strong>Ubuntu 16.04 LTS 64bit</strong> and <strong>Ubuntu 18.04 LTS 64bit</strong>, which can be <a href="https://www.ubuntu.com/download/desktop">downloaded here</a> (using older Ubuntu versions is not recommended). It is possible to use both, the Server Edition as well as the Desktop Edition. It might be easier for users less familiar with Linux to use the Desktop edition because it comes with many helpful tools such as graphical editors. The Server edition, on the other hand, comes with less preinstalled unneeded programs.</p>
<p>
<div class="bs-callout bs-callout-primary"  >
 <h4>Linux Installation</h4>    
<p>The initial installation of the server should be done by a person with knowledge of the Linux operating system.</p>
</div>


<div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div></p>
<h3 id="hahahugoshortcode-s3-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>General Server Installation

</h3>
<p>Install Ubuntu 16.04 or 18.04 using default installation options. After the installation has been finished and Ubuntu shows the graphical user interface, open a terminal shell (e.g., by typing “terminal” into the Ubuntu launcher). If you installed the Server Edition, log into the terminal screen that shows at the end of the boot process.</p>
<p>Install the following additional packages (sendmail is only required if the server should send notifications about the task status, which, however, is recommended):</p>
<pre tabindex="0"><code>sudo apt-get update
sudo apt-get install openssh-server
sudo apt-get install dcmtk
sudo apt-get install sendmail
sudo sendmailconfig
sudo apt-get install unzip
sudo apt-get install qt5-default
</code></pre><p>Add the user “yarra” for access from the Yarra clients, and the user “yarraserver” to run the YarraServer software. Both users should be added to the user group “yarra”. By setting the shell to “/bin/false” for the user yarra, it is prevented that users can open a shell login on the server (note that the password for user yarra can be seen in the configuration file of the Yarra client). Therefore, the user yarra must have access only to the Yarra queue share. The users yarra and yarraserver must never have the same password! It is not recommended to run the YarraServer software with root rights.</p>
<pre tabindex="0"><code>sudo groupadd yarra
sudo adduser --ingroup yarra --shell /bin/false yarra
sudo adduser --ingroup yarra yarraserver
</code></pre><div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s5-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Installation of the YarraServer package

</h3>
<p>Login with the account yarraserver and create the subfolder in the home directory, e.g. ~/yarra. It is recommended to set the permission of the folder to 750, so that only the user yarraserver and users of the group yarra can access the folder. Depending on the configuration/installation of your server, it can be advantageous to install the software at a different location (e.g., if the disk drives have been partitioned with only limited space for the home directories). In the following, it is assumed that the installation location is /home/yarraserver/yarra.</p>
<pre tabindex="0"><code>ssh yarraserver@localhost
mkdir yarra
chmod 750 yarra
</code></pre><p>Download and extract the YarraServer installation zip file into this folder:</p>
<pre tabindex="0"><code>cd yarra
unzip yarraserver_xx.zip
</code></pre><p>In most cases, the files will be extracted with correct file permissions. The folder ~/yarra should now look like this:</p>
<pre tabindex="0"><code>drwxr-xr-x 9 yarraserver yarra   4096 Oct 10 08:58 ./
drwxr-xr-x 3 yarraserver yarra   4096 Oct 10 08:22 ../
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 08:24 fail/
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 08:24 finished/
drwxr----- 2 yarraserver yarra   4096 Oct 10 08:25 install/
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 08:25 log/
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 08:25 modes/
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 09:02 modules/
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 09:02 modules_user/
drwxrwx--T 2 yarraserver yarra   4096 Oct 10 09:00 queue/
-rwxr----- 1 yarraserver yarra  69184 Oct 10 08:24 ServerCtrl*
drwxr-x--- 2 yarraserver yarra   4096 Oct 10 08:24 work/
-rwxr----- 1 yarraserver yarra 283617 Oct 10 08:24 YarraServer*
-rw-r----- 1 yarraserver yarra   2615 Oct 10 08:42 YarraServer.ini
-rw-r----- 1 yarraserver yarra   2615 Oct 10 08:42 YarraServer.ymf
</code></pre><p>If the file and directory permission are equivalent to the settings shown above (except for the T in the permissions of queue/), no changes need to be made. Otherwise, the following command can be used to obtain a working configuration, which will set the permissions for all extracted files to 750:</p>
<pre tabindex="0"><code>chmod 750 *
</code></pre><p>Next, set special permissions for the “queue” directory:</p>
<pre tabindex="0"><code>chmod 1770 queue
</code></pre><p>In addition, lock the write permissions for the files “queue/YarraModes.cfg” and “queue/YarraServer.cfg”, so that clients under no circumstances can delete this file:</p>
<pre tabindex="0"><code>chmod 440 queue/YarraModes.cfg
chmod 440 queue/YarraServer.cfg
</code></pre><p>Logout of the ssh session, which brings you back to the user shell of the administrator account:</p>
<pre tabindex="0"><code>exit
</code></pre><div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s7-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Installation and Configuration of Samba

</h3>
<p>Yarra clients connect to the server using a SMB network share. To provide the share, install the Samba package with:</p>
<pre tabindex="0"><code>sudo apt-get update
sudo apt-get install samba
</code></pre><p>Set the Samba password for the user yarra. This should be the same password that was used when creating the user:</p>
<pre tabindex="0"><code>sudo smbpasswd -a yarra
</code></pre><p>Edit the file /etc/samba/smb.conf. This can be done using the nano command (when the desktop edition of Ubuntu has been installed, this can also be conveniently done using the editor gedit):</p>
<pre tabindex="0"><code>sudo nano /etc/samba/smb.conf
</code></pre><p>Add the following section to the end of the file:</p>
<pre tabindex="0"><code>[YarraServer]
path = /home/yarraserver/yarra/queue
available = yes
valid users = yarra
read only = no
browseable = no
public = no
writable = yes
create mask = 0770
directory mask = 0400
force user = yarraserver
force group = yarra
</code></pre><p>In addition, change the following setting in the file:</p>
<pre tabindex="0"><code>############ Misc ############
usershare allow guests = no
</code></pre><p>Save and close the file. Then restart the samba server.</p>
<pre tabindex="0"><code>sudo systemctl restart smbd
</code></pre><div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s9-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Test Client Connectivity

</h3>
<p>It should now be possible to access the Samba share of the server from any Windows client in your network. To test this, open a command shell at a Windows client in your network and type the following command:</p>
<pre tabindex="0"><code>net use Y: \\[server IP]\YarraServer [pwd of yarra] /USER:yarra /yes
</code></pre><p>where [server IP] is the IP address of the server and [pwd of yarra] is the selected password of the user yarra. If the return value is “The command completed successfully.” then the server connection could be established. You should see now a network drive Y:, containing the files YarraServer.cfg and YarraModes.cfg.</p>
<p>It is recommended to reboot the server when these steps have been finished. Afterwards, continue to configure the YarraServer, which is described in the next section.</p>

<div class="bs-callout bs-callout-primary"  >
 <h4>Server Security</h4>    
<p>Note that additional configuration steps might be needed to properly securing your server. The steps described here are the minimum required procedures to bring the server into operation, but it is not said that these steps sufficiently secure the server. Please review the server configuration with your local IT department and review related documentation.</p>
</div>


<div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s12-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Manual Installation of Qt5

</h3>
<p>YarraServer requires the Qt5 runtime libraries. Newer Ubuntu versions (such as 16.04 and 18.04) come with Qt5 packages that can be used. However, if trying to run YarraServer on older Ubuntu versions or other Linux distributions, it might be necessary to install the libraries manually. The steps below describe how Qt5 can be installed using the official installer from the Qt developers.</p>

<div class="bs-callout bs-callout-warning"  >
    
<p>The following steps are normally not needed when using Ubuntu 16.04 or 18.04.</p>
</div>


<p>The easiest way is to open a graphical shell (terminal) and login as the user yarraserver:</p>
<pre tabindex="0"><code>ssh -X yarraserver@localhost
</code></pre><p>Download and install Qt5 (for user yarraserver) using the following commands (you may want to use a newer version than 5.2):</p>
<pre tabindex="0"><code>wget http://download.qt.io/archive/qt/5.2/5.2.1/qt-opensource-linux-x64-5.2.1.run
chmod 700 qt-opensource-linux-x64-5.2.1.run
./qt-opensource-linux-x64-5.2.1.run
</code></pre>
<div class="bs-callout bs-callout-primary" style="margin-top: 30px; margin-bottom: 30px;" >
 <h4>Ubuntu Server Edition</h4>    
<p>Because the Qt installation is done with a graphical installer, it is necessary to first install the X11 Window System when using the Server Edition. This can be done with the command: <br>sudo apt-get install xorg</p>
</div>


<p>Go through the graphical installer and use all default options (there is no need to change anything). If you are connected to your server via an ssh connection, you may see the following error message:</p>
<pre tabindex="0"><code>qt-opensource-linux-x64-5.2.1.run: cannot connect to X server
</code></pre><p>In this case, you have to install a local X server application for your client computer (e.g. <a href="http://sourceforge.net/projects/xming/">Xming</a> for Windows or <a href="http://www.xquartz.org/">XQuartz</a> for macOS) and restart your ssh session (with the -X option, as listed above).</p>
<p>After the installation, edit the file .bashrc in the home directory of user yarraserver using the following command:</p>
<pre tabindex="0"><code>gedit .bashrc
</code></pre><p>or, in case of a non-graphical ssh connection, using:</p>
<pre tabindex="0"><code>nano .bashrc
</code></pre><p>and add the following line at the end of the file:</p>
<pre tabindex="0"><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/home/yarraserver/Qt5.2.1/5.2.1/gcc_64/lib
</code></pre><div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>

</div>

      
    </div>
  </div>
</div>
      <footer style="margin-top: 100px;">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <ul class="list-inline pull-left">
                    
                         
                         
                          <li><a class="page-scroll" href="/">Home</a></li>
                          <li class="footer-menu-divider">&vert;</li> 
                        
                          <li><a class="page-scroll" href="/disclaimer/">Disclaimer</a></li>
                          <li class="footer-menu-divider">&vert;</li> 
                        
                          <li><a class="page-scroll" href="/license/">License</a></li>
                           
                         
                    
                </ul>
            </div>
            <div class="col-md-4">
            <div class="pull-right">
            <a href="http://cai2r.net" target="_blank"><img class="cai2rlogo" src="/assets/img/cai2r.png" height="65"></a>
            </div>
            </div>
        </div>
    </div>
</footer>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha256-xaF9RpdtRxzwYMWg4ldJoyPWqyDPCRD0Cv7YEEe6Ie8=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>

<script>
hljs.configure({
  languages: []
})
hljs.initHighlightingOnLoad();
</script>

<script src="/assets/js/script.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'yarra-dev/Support'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>


  </body>
</html>

