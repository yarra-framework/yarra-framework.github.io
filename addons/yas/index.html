<!DOCTYPE html>
<html class="no-js">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>Archive Search  &middot; Yarra Framework</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">

<meta property="og:title" content="Archive Search  &middot; Yarra Framework ">
<meta property="og:site_name" content="Yarra Framework"/>
<meta property="og:url" content="http://yarra-framework.org/addons/yas/" />
<meta property="og:locale" content="en-us">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="2018-06-15T00:00:00Z" />
<meta property="og:article:modified_time" content="2018-06-15T00:00:00Z" />

  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "Archive Search",
    "author": {
      "@type": "Person",
      "name": "http://profiles.google.com/+?rel=author"
    },
    "datePublished": "2018-06-15",
    "description": "",
    "wordCount":  929 
  }
</script>


<link rel="canonical" href="http://yarra-framework.org/addons/yas/" />

<meta name="generator" content="Hugo 0.104.3" />


  <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/yarra.css">

  
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-63470225-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-63470225-3');
  </script>

</head>
<body>
<nav class="navbar navbar-expand-lg fixed-top site-navbar navbar-inverse">
  <a class="navbar-brand text-white" href="http://yarra-framework.org/">Yarra Framework</a>
  <button class="navbar-toggler text-white" 
  type="button" data-toggle="collapse" data-target="#exCollapsingNavbar2" aria-controls="exCollapsingNavbar2"
    aria-expanded="false" aria-label="Toggle navigation">
    &#9776;
  </button>
  <div class="collapse navbar-collapse" id="exCollapsingNavbar2">
    <ul class="nav navbar-nav ml-1 mr-auto">
               
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/overview/">
            
            <span class="text-capitalize no-decoration text-white">Overview</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/clients/">
            
            <span class="text-capitalize no-decoration text-white">Clients</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/server/">
            
            <span class="text-capitalize no-decoration text-white">Server</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/modules/">
            
            <span class="text-capitalize no-decoration text-white">Modules</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/logserver/">
            
            <span class="text-capitalize no-decoration text-white">LogServer</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item active" href="/addons/">
            
            <span class="text-capitalize no-decoration text-white">Addons</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/download/">
            
            <span class="text-capitalize no-decoration text-white">Download</span>
          </a>
        </li>
        
              
        
        <li class="nav-item">
          <a class="nav-link menu-item " href="/blog/">
            
            <span class="text-capitalize no-decoration text-white">Blog</span>
          </a>
        </li>
        
              
        
              
        
              
        
      
    </ul>
  </div>
</nav>


<div class="container p-a-0">
  <div class="row m-l-0 m-r-0 mb-2">
    <div class="col">
      <h1>Addons&nbsp;-&nbsp;Archive Search</h1>
    </div>
  </div>
    <div class="row m-l-0 m-r-0">
      <div class="col-xs-12 col-lg-3">
      <div class="list-group mr-3 mb-4">
        <a href="http://yarra-framework.org/addons/" class="list-group-item list-group-item-action">Overview</a>
        
        
        
        <a href="/addons/clienttools/" class="list-group-item list-group-item-action ">&ndash;&nbsp; Client Tools</a>
        
        <a href="/addons/yas/" class="list-group-item list-group-item-action active">&ndash;&nbsp; Archive Search</a>
        
        <a href="/addons/filemover/" class="list-group-item list-group-item-action ">&ndash;&nbsp; File Mover</a>
        
        <a href="/addons/yarralink/" class="list-group-item list-group-item-action ">&ndash;&nbsp; YarraLink</a>
        
      </div>
    </div>
    <div class="col-xs-12 col-lg-9 post-container">
      <div class="content pt-2">
  <h3 id="hahahugoshortcode-s0-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Introduction

</h3>
<p>When collecting raw-data files from a large number of patients (e.g., through Yarra offline reconstructions or using the Yarra RDS client), it can quickly become difficult to find the data file from a certain patient or exam (as needed for performing retrospective studies). This problem is solved by Yarra Archive Search (YAS), which can be used as add-on for a YarraServer installation or completely independently from other Yarra components.</p>
<p>YAS consists of an indexing service, which typically runs every night as cron job on a Linux server, and a web-based front-end, which allows users to search for raw-data files by patient name, scan protocol, exam date etc. and provides the exact file location and additional information about the scan. Although intended for intranet use only, the front-end is password protected to ensure that only authorized staff has access to the scan information.</p>
<img style="margin-left: auto; margin-right: auto; display: block;  margin-top: 30px; margin-bottom: 30px; "  class="img-fluid" src="/yas_small.jpg" />

<div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s3-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Installation and Configuration

</h3>
<p>YAS requires a Linux based server running either Ubuntu 16.04 LTS or 18.04 LTS. It can be installed on a separate server, or in parallel to a YarraServer daemon.</p>
<p>Download the YAS package and unzip it in a folder on the Linux server. This can be a subfolder in the home directory of user &ldquo;yarraserver&rdquo; or any other user, e.g. /home/[username]/yas.</p>
<p>Edit the configuration file YAS.ini. It is necessary to define the port number, password for the user interface, and to list all folders that should be scanned for Siemens raw-data files (aka Twix files). By default the configuration file reads:</p>
<pre tabindex="0"><code>;### Configuration file for Yarra Archive Search ###
 
[WebGUI]
;# Defines the port to be used for the web interface. The value needs to be different 
;# from the port used for the Yarra WebGUI if running on the same server.
Port=9090
 
;# Defines the password for accessing the web interface. 
Password=SetPasswordHere
 
 
[Indexer]
;# Defines for how many days entries remain in the database if they were not seen 
;# during the search run (entries are not removed immediately to avoid that the
;# whole database needs to be recreated if a network share was temporarily not 
;# available during a search run). 
KeepUnseenEntries=14
 
 
[Folders]
;# Defines which folders should be searched for raw-data files. Multiple folders
;# can be listed. Format: /path/on/linux/server=yes
 
;/path/to/rawdata=yes
 
 
[FolderAlias]
;# This section allows defining alias names for each search path. This can be useful
;# if the mount point on the server is different from how the location is mapped
;# at the users&#39; workstations. For example, if the raw-data is located at /media/rawdata
;# on the server but end users map this folder under drive V:, it can be helpful to
;# define an alias /media/rawdata=V:. In this way, the file location will be displayed
;# relative to drive V: in the web interface, making it easier for the users to navigate
;# to the location. Entries must be named identical to the full path listed in [Folders].
 
;/path/to/rawdata=/alias/to/use
</code></pre><p>Run the indexer once by calling</p>
<pre tabindex="0"><code>./YASIndexer 
</code></pre><p>from the YAS installation folder. Depending on the amount of raw-data files, the search procedure might take a few minutes.</p>
<p>Setup the YASIndexer as daily Cron job. It’s recommended to run it during the night when it is unlikely that people will use the frontend. Type in the following command:</p>
<pre tabindex="0"><code>crontab -e
</code></pre><p>and insert the following line:</p>
<pre tabindex="0"><code>0 5 * * * cd /home/[username]/yas &amp;&amp; /home/[username]/yas/YASIndexer &gt;&gt; /home/[username]/yas/cron.log 2&gt;&amp;1
</code></pre><p>where [username] denotes the name of the user under whose home folder YAS has been installed (the path might have to be adjusted depending on the actual installation location). This will launch the indexer every night at 5am and write the output into the file cron.log. On the first execution of the crontab command, it may ask you for the preferred editor. Nano should be selected here.</p>
<p>Setup the YASWebGUI as daemon service by editing the file yaswebgui.service (e.g. with “nano yaswebgui.service”) and adjusting the installation location if necessary (in the example shown below, it is assumed that YAS is installed in the home folder of a user, i.e. /home/[username]/yas where [username] needs to be replaced with the username):</p>
<pre tabindex="0"><code>[Unit]
Description=YAS WebGUI
Documentation=http://yarraframework.com
After=smbd.service
Requires=smbd.service

[Service]
Type=simple
User=yarraserver
WorkingDirectory=/home/[username]/yas
ExecStart=/home/[username]/yas/YASWebGUI

Restart=on-failure
RestartSec=3

[Install]
WantedBy=multi-user.target
</code></pre><p>Copy the file yaswebgui.service to the directory /etc/systemd/system (this can only be done using administrator rights). Start and enable the YASWebGUI with the commands:</p>
<pre tabindex="0"><code>sudo systemctl enable yaswebgui
sudo systemctl start yaswebgui
</code></pre><p>Yarra Archive Search should now be ready to use.</p>
<div style="margin-bottom: 40px; font-size: 0px;">&nbsp;</div>
<h3 id="hahahugoshortcode-s5-hbhb">
<i class="fas fa-angle-double-right" style="color: #580F8B; font-size: 24px;">&nbsp;</i>Usage

</h3>
<p>If configured as described above, the YASIndexer will automatically update the database of raw-data files every night. To search for scan, open a web browser and type in the URL <a href="http://xxx.xxx.xxx.xxx">http://xxx.xxx.xxx.xxx</a>:[port], where port is the port number defined in the configuration file (e.g. http://192.168.1.101:9090). The port number can be omitted when using port 80, which however requires sudo rights on the server. The search page becomes visible after the password has been entered.</p>
<p>Scans can be searched by patient name, patient ID (MRN, accession number (ACC), protocol name, or exam date. If multiple search entries are entered, scans are displayed that match to both search terms (AND). When clicking on an entry in the result table, details will be displayed in the Information box below the table. If the file comes from a Yarra offline reconstruction task, additional information about the task will shown. The exact file location is shown as a link and can be copied right into the file selection box of the <a href="/clients/sac">Yarra Stand-Alone Client</a> (SAC), which can be handy for submitting retrospective reconstruction tasks.</p>
<p>To clear and rebuilt the database, call</p>
<pre tabindex="0"><code>./YASIndexer –clear 
</code></pre><p>and rerun the YASIndexer afterwards.</p>

</div>

      
    </div>
  </div>
</div>
      <a href="https://github.com/orgs/yarra-framework/discussions" target="_none" class="chat-button">Open Chat</a>
<footer style="margin-top: 100px;">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <ul class="list-inline pull-left">
                    
                         
                         
                          <li><a class="page-scroll" href="/">Home</a></li>
                          <li class="footer-menu-divider">&vert;</li> 
                        
                          <li><a class="page-scroll" href="/disclaimer/">Disclaimer</a></li>
                          <li class="footer-menu-divider">&vert;</li> 
                        
                          <li><a class="page-scroll" href="/license/">License</a></li>
                           
                         
                    
                </ul>
            </div>
            <div class="col-md-4">
            <div class="pull-right">
            <a href="http://cai2r.net" target="_blank"><img class="cai2rlogo" src="/assets/img/cai2r.png" height="65"></a>
            </div>
            </div>
        </div>
    </div>
</footer>

    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha256-xaF9RpdtRxzwYMWg4ldJoyPWqyDPCRD0Cv7YEEe6Ie8=" crossorigin="anonymous"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>

<script>
hljs.configure({
  languages: []
})
hljs.initHighlightingOnLoad();
</script>

<script src="/assets/js/script.js"></script>
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">


  </body>
</html>

